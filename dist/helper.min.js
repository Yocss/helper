/**
 * @axmine/helper v1.1.2
 * (c) 2019-2020 yocss https://github.com/yocss/axmine.git
 * License: MIT
 * Released on: Aug 21, 2020
 */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).helper=t()}(this,function(){"use strict";function g(e){return Object.prototype.toString.call(e).slice(8,-1).toLocaleLowerCase()}var s,e;(e=s||(s={})).localStorage="localStorage",e.sessionStorage="sessionStorage",e.cookie="cookie";var c,t,o=function(){function e(){}return e.prototype.set=function(e,t,o){void 0===o&&(o={});var r=Object.assign({expireDays:7,type:s.localStorage},o),i=r.type,n=r.expireDays;return"cookie"===i?this.setCookie(e,t,n):this.setStorage(e,t,n,i)},e.prototype.get=function(e,t){return void 0===t&&(t=s.localStorage),"cookie"===t?this.getCookie(e):this.getStorage(e,t)},e.prototype.remove=function(e,t){return void 0===t&&(t=s.localStorage),"cookie"===t?this.removeCookie(e):this.removeStorage(e,t)},e.prototype.setStorage=function(e,t,o,r){void 0===o&&(o=7),void 0===r&&(r=s.localStorage);var i=!(!window||!window[r]);if(i)try{var n=0<o?1*(new Date).getTime()+864e5*o:0,a=JSON.stringify({v:t,t:n});window[r].setItem(e,a),i=this.getStorage(e)===t}catch(e){i=!1,console.error("数据格式化失败")}return i},e.prototype.getStorage=function(e,t){void 0===t&&(t=s.localStorage);var o="";if(window&&window[t])try{var r=window[t].getItem(e)||'{"v":"","t":0}',i=JSON.parse(r),n=(new Date).getTime();o=i.v,"localStorage"===t&&0<i.t&&n>i.t&&(o="",this.removeStorage(e))}catch(e){console.error("数据格式错误")}return o},e.prototype.removeStorage=function(e,t){void 0===t&&(t=s.localStorage);var o=!(!window||!window[t]);return o&&(window[t].removeItem(e),o=""===this.getStorage(e)),o},e.prototype.setCookie=function(e,t,o){void 0===o&&(o=7);var r=window&&window.navigator.cookieEnabled;if(r){var i=new Date;i.setDate(i.getDate()+o);var n=o?";expires="+i.toUTCString():"";document.cookie=e+"="+escape(t)+n,r=this.getCookie(e)===t}return r},e.prototype.getCookie=function(e){var t="";if(window&&window.navigator.cookieEnabled&&0<document.cookie.length){var o=document.cookie.indexOf(e+"=");if(0<=o){o=o+e.length+1;var r=document.cookie.indexOf(";",o);-1===r&&(r=document.cookie.length),t=unescape(document.cookie.substring(o,r))}}return t},e.prototype.removeCookie=function(e){var t=window&&window.navigator.cookieEnabled;return t&&(t=!!this.getCookie(e))&&this.setCookie(e,"",-1),t},e}();(t=c||(c={})).localStorage="localStorage",t.sessionStorage="sessionStorage",t.cookie="cookie";var i,r,n=function(){function e(e){void 0===e&&(e=c.localStorage),this.type=e}return e.prototype.set=function(e,t,o){void 0===o&&(o=7);var r=this.type;return"cookie"===r?this.setCookie(e,t,o):this.setStorage(e,t,o,r)},e.prototype.get=function(e){return"cookie"===this.type?this.getCookie(e):this.getStorage(e,this.type)},e.prototype.remove=function(e){return"cookie"===this.type?this.removeCookie(e):this.removeStorage(e,this.type)},e.prototype.setStorage=function(e,t,o,r){void 0===o&&(o=7),void 0===r&&(r=c.localStorage);var i=!(!window||!window[r]);if(i)try{var n=0<o?1*(new Date).getTime()+864e5*o:0,a=JSON.stringify({v:t,t:n});window[r].setItem(e,a),i=this.getStorage(e)===t}catch(e){i=!1,console.error("数据格式化失败")}return i},e.prototype.getStorage=function(e,t){void 0===t&&(t=c.localStorage);var o="";if(window&&window[t])try{var r=window[t].getItem(e)||'{"v":"","t":0}',i=JSON.parse(r),n=(new Date).getTime();o=i.v,"localStorage"===t&&0<i.t&&n>i.t&&(o="",this.removeStorage(e))}catch(e){console.error("数据格式错误")}return o},e.prototype.removeStorage=function(e,t){void 0===t&&(t=c.localStorage);var o=!(!window||!window[t]);return o&&(window[t].removeItem(e),o=""===this.getStorage(e)),o},e.prototype.setCookie=function(e,t,o){void 0===o&&(o=7);var r=window&&window.navigator.cookieEnabled;if(r){var i=new Date;i.setDate(i.getDate()+o);var n=o?";expires="+i.toUTCString():"";document.cookie=e+"="+escape(t)+n,r=this.getCookie(e)===t}return r},e.prototype.getCookie=function(e){var t="";if(window&&window.navigator.cookieEnabled&&0<document.cookie.length){var o=document.cookie.indexOf(e+"=");if(0<=o){o=o+e.length+1;var r=document.cookie.indexOf(";",o);-1===r&&(r=document.cookie.length),t=unescape(document.cookie.substring(o,r))}}return t},e.prototype.removeCookie=function(e){var t=window&&window.navigator.cookieEnabled;return t&&(t=!!this.getCookie(e))&&this.setCookie(e,"",-1),t},e}(),d=["required","len","min","max","enum","type","pattern","validator"];function u(e,t){var o={status:!0,message:e.message||""},r=Object.keys(e),i=g(t),n=!1,a=/^\s+$/.test(t)||["",void 0,null].includes(t);if(r.includes("required")&&e.required&&(o.status=!a,n=!0===e.required),!(!n&&a)&&o.status)for(var s=0;s<r.length;s++){var c=e[r[s]];if(d.includes(r[s]))switch(r[s]){case"len":o.status=t.length===1*c;break;case"min":o.status="number"===i?c<=t:t.length>=c;break;case"max":o.status="number"===i?t<=c:t.length<=c;break;case"enum":o.status=c.includes(t);break;case"type":o.status=c.toLowerCase()===i;break;case"pattern":var u=new RegExp(c);o.status=u.test(t);break;case"validator":if("function"!==g(c))throw new Error("validator 不是一个函数");o.status=c(t)}if(!o.status)break}return o}return(r=i||(i={})).Float="float",r.Int="int",{formatDate:function(e,t){void 0===t&&(t="y-m-d h:i");var o=new Date(1e3*e);function r(e){return e<10?"0"+e:e.toString()}return t.replace(/\w/g,function(e){var t=e.toLowerCase();return{y:o.getFullYear(),m:r(o.getMonth()+1),d:r(o.getDate()),h:r(o.getHours()),i:r(o.getMinutes()),s:r(o.getSeconds()),w:["天","一","二","三","四","五","六"][o.getDay()]}[t]||""})},getType:g,store:new o,cookie:n,validate:function(n,a){var s={status:!0,infos:[]};return Object.keys(n).forEach(function(e){for(var t=[].concat(n[e]),o=a[e],r=0;r<t.length;r++){var i=u(t[r],o);if(!i.status){s.infos.push({message:i.message,key:e});break}}}),s.status=s.infos.length<1,s},random:function(e,t,o){if(void 0===e&&(e=0),void 0===t&&(t=1),void 0===o&&(o=i.Float),"number"!==g(e)||"number"!==g(t))throw Error("min and max must be a number");if(t<e)throw Error("min or max is outside of its valid range.");var r=Math.random()*(t-e+1)+e;return"int"===o&&(r=Math.floor(r)),r},camelCase:function(e){if("string"!==g(e))throw Error("str must be string.");var t=/[a-zA-Z]/.test(e),o=t?e.replace(/\-{1,}/g,"_"):e;if(t){var r=(o=(o=0===(o=o.replace(/\_{1,}/,"_")).indexOf("_")?o.slice(1):o).lastIndexOf("_")===o.length-1?o.slice(0,-1):o).split("_"),i=r.length;if(1<i){for(var n=r[0].toLowerCase(),a="",s=1;s<i;s++){var c=r[s].toLowerCase();1<c.length&&(c=c[0].toUpperCase()+c.slice(1)),a+=c}o=n+a}}return o},setStore:function(r,e){var t=g(e);if(!["array","object"].includes(t))throw new Error("data 类型不正确");return[].concat(e).forEach(function(e){var t,o=e;void 0!==e.key&&void 0!==e.value&&((t={})[e.key]=e.value,o=t),Object.keys(o).forEach(function(e){"object"===g(o[e])?Object.assign(r[e],o[e]):(r[e],o[e])})}),r}}});
